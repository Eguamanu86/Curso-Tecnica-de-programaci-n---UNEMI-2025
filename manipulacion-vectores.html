<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicios con Vectores Numericos</title>
    <style>
        table td {
            text-align: center;
        }
    </style>
</head>

<body>
    <h4>Ejercicio con Vectores</h4>
    <div>
        <table>
            <tbody>
                <tr>
                    <td>Dimension del arreglo:</td>
                    <td>
                        <select id="select-dimension-arreglo">
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="15">15</option>
                            <option value="20">20</option>
                            <option value="25">25</option>
                            <option value="30">30</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>Ingrese valor a buscar:</td>
                    <td><input type="text" name="" id="id-valor-busqueda" maxlength="4" size="5"></td>
                </tr>
            </tbody>
        </table>


    </div>
    <br>
    <table id="id-table-vector-numerico" border="1" cellspacing="1" cellpadding="1">
        <thead>
            <tr>
                <td colspan="10">Vector numerico de N elementos</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
                <td>6</td>
                <td>7</td>
                <td>8</td>
                <td>9</td>
            </tr>
            <tr>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="5"><button id="btn-cargar-vector">Cargar Vector</button></td>
                <td colspan="5"><button id="btn-vaciar-vector">Vaciar Vector</button></td>
            </tr>
            <tr>
                <td colspan="5"><button id="btn-numero-mayor">Numero Mayor</button></td>
                <td colspan="5"><button id="btn-numero-menor">Numero Menor</button></td>
            </tr>
            <tr>
                <td colspan="5"><button id="btn-sumar-valores">Suma de Valores</button></td>
                <td colspan="5"><button id="btn-producto-vector">Producto de Valores</button></td>
            </tr>
             <tr>
                <td colspan="5">
                    <button id="btn-calcular-moda">Moda</button>
                </td>
                <td colspan="5">
                    <button id="btn-calcular-media">Media</button>
                    <button id="btn-calcular-mediana">Mediana</button>
                </td>
            </tr>
        </tfoot>
    </table>
    <hr>
    <table>
        <thead>
            <tr>
                <td colspan="2">Calculos con vectores </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Resultado:</td>
                <td colspan="2"><input type="text" id="id-txt-respuesta" size="70"></td>
            </tr>
        </tbody>
    </table>

    <script>
        // Declaracion del vector
        let vector = []
        const NUM_MAXIMO_RANDOM = 50

        // Referencia a elementos del DOM/HTML -> controles.
        const tableTbody = document.querySelector('#id-table-vector-numerico > tbody')

        const btnCargarVector = document.getElementById("btn-cargar-vector")
        const btnVaciarVector = document.getElementById("btn-vaciar-vector")

        const btnNumeroMayor = document.getElementById("btn-numero-mayor")
        const btnNumeroMenor = document.getElementById("btn-numero-menor")

        // Botones para operaciones  suma y producto
        const btnSumarValores = document.getElementById("btn-sumar-valores")
        const btnProductoValores = document.getElementById("btn-producto-vector")

        // Botones para calculos estadisticos
        const btnCalcularModa = document.getElementById("btn-calcular-moda")
        const btnCalcularMedia = document.getElementById("btn-calcular-media")
        const btnCalcularMediana = document.getElementById("btn-calcular-mediana")

        // Opcional en caso de calculos con vectores y mostrar resultados.
        const txtRespuesta = document.getElementById("id-txt-respuesta")
        const selectDimension = document.getElementById("select-dimension-arreglo")

        let TOPE = parseInt(selectDimension.options[selectDimension.selectedIndex].value)

        selectDimension.addEventListener('change', (event) => {
            TOPE = parseInt(event.target.value)
        })

        btnCargarVector.addEventListener('click', (event) => {
            event.preventDefault()
            fnCargarVector()
            fnPresentarVector()
        })

        function fnCargarVector() {
            for (let x = 0; x < TOPE; x++) {
                const numero = Math.ceil(Math.random() * NUM_MAXIMO_RANDOM);
                vector[x] = numero
            }
        }

        function fnPresentarVector() {
            let contador = 0
            let str = ''
            while (contador < 2) {
                str = str + `<tr>`
                for (let x = 0; x < TOPE; x++) {
                    if (contador === 0) {
                        str = str + `<td>${x}</td>`
                    } else {
                        str = str + `<td bgcolor="#00FF00">${vector[x] || '-'}</td>`
                    }
                }
                str = str + `</tr>`
                contador++
            }
            tableTbody.innerHTML = str
        }

        btnVaciarVector.addEventListener('click', (event) => {
            event.preventDefault()
            fnVaciarVector()
            fnPresentarVector()
        })

        function fnVaciarVector() {
            vector = []
        }

        // Obtener numero mayor y menor

        btnNumeroMayor.addEventListener('click',(event)=>{
            txtRespuesta.value = numeroMayor()
        })

        btnNumeroMenor.addEventListener('click',(event)=>{
            txtRespuesta.value = numeroMenor()
        })

        function numeroMayor(){
            let mayor = vector[0]

            for(let i=1 ; i < vector.length; i++){
                if(vector[i] > mayor){
                    mayor = vector[i]
                }
            }

            return mayor
        }

        function numeroMenor(){
            let menor = vector[0]

            for(let i=1 ; i < vector.length; i++){
                if(vector[i] < menor){
                    menor = vector[i]
                }
            }

            return menor
        }


        // Sumar y Producto del valores del vector

        btnSumarValores.addEventListener('click',(event)=>{
            txtRespuesta.value = fnSumarValores()
        })

        btnProductoValores.addEventListener('click',(event)=>{
            txtRespuesta.value = fnProductoVectores()
        })

        function fnSumarValores() {
            let suma = 0
            for (let i = 0; i < vector.length; i++) {
                suma = suma + vector[i]
            }
            return suma
        }

        function fnProductoVectores() {
            let producto = 1
            for (let i = 0; i < vector.length; i++) {
                producto = producto * vector[i]
            }
            return producto
        }

        // Calculos estadisticos: Moda, Media, Mediana
        btnCalcularModa.addEventListener('click',(event)=>{
            const copiaVector = [...vector] // crear una copia del vector original
            txtRespuesta.value = fnCalcularModa(copiaVector)
        })

        btnCalcularMedia.addEventListener('click',(event)=>{
            txtRespuesta.value = fnCalcularMedia()
        })

        btnCalcularMediana.addEventListener('click',(event)=>{
            const copiaVector = [...vector] // crear una copia del vector original
            txtRespuesta.value = fnCalcularMediana(copiaVector)
        })


        function fnCalcularModa(copiaVector) {
            let frecuencias = []
            for (let i in copiaVector) {
                const numero = copiaVector[i]
                // calcular frecuencia de ese numero
                frecuencias[i] = calcularFrecuencia(numero, copiaVector)
            }
            // obtener la posicion del numero con mayor frecuencia
            const posicionModa = obtenerPosicionFrecuenciaMayor(frecuencias)
            const moda = copiaVector[posicionModa]
            return moda
        }


        function calcularFrecuencia(numero, copiaVector) {
            let numVeces = 0
            for (let i in copiaVector) {
                if (copiaVector[i] === numero) {
                    numVeces++
                }
            }
            return numVeces
        }

        function obtenerPosicionFrecuenciaMayor(frecuencias) {
            let posMayor = 0
            let numMayor = frecuencias[0]
            for (let i in frecuencias) {
                if (frecuencias[i] > numMayor) {
                    numMayor = frecuencias[i]
                    posMayor = i
                }
            }
            return posMayor
        }

        function fnCalcularMedia(){
            let suma = fnSumarValores()
            let media = suma / vector.length
            return media
        }

        function fnCalcularMediana(copiaVector){
            let mediana = 0
            copiaVector.sort((a, b) => a - b) // ordenar el vector de menor a mayor
            const dimensiones = copiaVector.length // Longitud del vector

            // Verificar si la dimension es par o impar
            if (dimensiones % 2 === 0) {
                // Si es par
                let posicionCentral = dimensiones / 2
                mediana = (copiaVector[posicionCentral - 1] + copiaVector[posicionCentral]) / 2
            } else {
                // Si es impar
                let posicionCentral = parseInt((dimensiones - 1) / 2)
                mediana = copiaVector[posicionCentral]
            }

            return mediana
        }

    </script>
</body>

</html>
